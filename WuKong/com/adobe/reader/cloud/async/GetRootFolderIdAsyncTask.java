package com.adobe.reader.cloud.async;

import android.os.AsyncTask;
import com.adobe.reader.ARConstants.CloudConstants;
import com.adobe.reader.cloud.network.BlueHeronAPI.API_LIST;
import com.adobe.reader.cloud.network.CloudNetworkManager;
import com.adobe.reader.cloud.ui.CloudUIHandler;
import org.json.JSONException;
import org.json.JSONObject;

public class GetRootFolderIdAsyncTask
  extends AsyncTask<Void, Void, JSONObject>
{
  private CloudUIHandler mCloudUIHandler;
  private boolean mTaskFailed = false;
  
  public GetRootFolderIdAsyncTask(CloudUIHandler paramCloudUIHandler)
  {
    this.mCloudUIHandler = paramCloudUIHandler;
  }
  
  protected JSONObject doInBackground(Void... paramVarArgs)
  {
    try
    {
      paramVarArgs = CloudNetworkManager.executeAPI(BlueHeronAPI.API_LIST.GET_ROOT, new String[0]);
      return paramVarArgs;
    }
    catch (Exception paramVarArgs)
    {
      this.mTaskFailed = true;
    }
    return null;
  }
  
  protected void onPostExecute(JSONObject paramJSONObject)
  {
    if (!this.mTaskFailed) {}
    try
    {
      paramJSONObject = paramJSONObject.getString("id");
      CloudNetworkManager.setRootFolderID(paramJSONObject);
      this.mCloudUIHandler.initializeFolder(ARConstants.CloudConstants.CLOUD_ROOT_DIRECTORY, paramJSONObject);
      if (this.mTaskFailed) {
        this.mCloudUIHandler.handleError();
      }
      return;
    }
    catch (JSONException paramJSONObject)
    {
      for (;;)
      {
        this.mTaskFailed = true;
      }
    }
  }
}
