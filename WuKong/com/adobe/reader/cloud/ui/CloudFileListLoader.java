package com.adobe.reader.cloud.ui;

import android.app.Activity;
import android.os.AsyncTask.Status;
import com.adobe.reader.ARFileEntryAdapter;
import com.adobe.reader.cloud.CloudUtilities;
import com.adobe.reader.cloud.async.LoadCloudFileListAsyncTask;

public class CloudFileListLoader
{
  private Activity mActivity;
  private String mCurrentDirectory;
  private String mCurrentDirectoryID;
  private LoadCloudFileListAsyncTask mLoadCloudFileListAsyncTask;
  private ARFileEntryAdapter mPdfFilesAdapter;
  private FILE_LIST_SOURCE mSource;
  private LoadCloudFileListInterface mUIHandler;
  
  public CloudFileListLoader(LoadCloudFileListInterface paramLoadCloudFileListInterface, Activity paramActivity, ARFileEntryAdapter paramARFileEntryAdapter, FILE_LIST_SOURCE paramFILE_LIST_SOURCE)
  {
    this.mActivity = paramActivity;
    this.mUIHandler = paramLoadCloudFileListInterface;
    this.mPdfFilesAdapter = paramARFileEntryAdapter;
    this.mLoadCloudFileListAsyncTask = null;
    this.mSource = paramFILE_LIST_SOURCE;
  }
  
  public void cleanUp()
  {
    if (this.mLoadCloudFileListAsyncTask != null)
    {
      this.mLoadCloudFileListAsyncTask.cancel(true);
      this.mLoadCloudFileListAsyncTask = null;
    }
  }
  
  public String getCurrentDirectory()
  {
    return this.mCurrentDirectory;
  }
  
  public void setCurrentDirectory(String paramString1, String paramString2)
  {
    this.mCurrentDirectory = paramString1;
    this.mCurrentDirectoryID = paramString2;
  }
  
  public void updateFileList()
  {
    if ((this.mLoadCloudFileListAsyncTask != null) && (this.mLoadCloudFileListAsyncTask.getStatus() != AsyncTask.Status.FINISHED))
    {
      CloudUtilities.logit("Multiple LoadCloudFileList async tasks");
      this.mLoadCloudFileListAsyncTask.cancel(true);
    }
    this.mLoadCloudFileListAsyncTask = new LoadCloudFileListAsyncTask(this, this.mActivity, this.mUIHandler, this.mPdfFilesAdapter, this.mCurrentDirectory, this.mCurrentDirectoryID, this.mSource);
    this.mLoadCloudFileListAsyncTask.execute(new Void[0]);
  }
  
  public static enum FILE_LIST_SOURCE
  {
    FROM_CLOUD,  IN_TRANSFER;
  }
}
