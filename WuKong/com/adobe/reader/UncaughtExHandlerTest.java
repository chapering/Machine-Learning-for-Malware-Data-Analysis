package com.adobe.reader;

import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.res.Resources;
import android.util.Log;
import java.io.PrintWriter;
import java.io.StringWriter;
import java.io.Writer;
import java.util.Calendar;
import java.util.Date;

public class UncaughtExHandlerTest
  implements Thread.UncaughtExceptionHandler
{
  private static final String[] mailToaddresses = { "DL-reader-mobile-qe-noida@adobe.com", "gaurav@adobe.com" };
  private Context curContext;
  
  public UncaughtExHandlerTest(Context paramContext)
  {
    this.curContext = paramContext;
  }
  
  public void uncaughtException(Thread paramThread, Throwable paramThrowable)
  {
    Log.d("AUTOMATION", "inside uncaught exception");
    paramThread = null;
    String str = Calendar.getInstance().getTime().toLocaleString();
    Object localObject = new StringWriter();
    PrintWriter localPrintWriter = new PrintWriter((Writer)localObject);
    paramThrowable.printStackTrace(localPrintWriter);
    localObject = localObject.toString();
    localPrintWriter.close();
    try
    {
      paramThrowable = this.curContext.getPackageManager().getPackageInfo(this.curContext.getPackageName(), 0);
      paramThread = paramThrowable;
    }
    catch (PackageManager.NameNotFoundException paramThrowable)
    {
      for (;;) {}
    }
    paramThrowable = new StringBuilder("crashlog: ");
    paramThrowable.append(str + " ");
    paramThrowable.append(this.curContext.getResources().getString(2131361820) + " " + this.curContext.getResources().getString(2131361792) + " ");
    if (paramThread != null) {
      paramThrowable.append(this.curContext.getResources().getString(2131361821) + " " + paramThread.versionCode);
    }
    Log.d("AUTOMATION", "BEfore send intent");
    paramThread = new Intent("android.intent.action.SEND");
    paramThread.putExtra("android.intent.extra.TEXT", (String)localObject);
    paramThread.setType("text/plain");
    paramThread.putExtra("android.intent.extra.EMAIL", mailToaddresses);
    paramThread.putExtra("android.intent.extra.SUBJECT", paramThrowable.toString());
    paramThread.addFlags(268435456);
    try
    {
      this.curContext.startActivity(paramThread);
      Log.d("AUTOMATION", "Finishing exception handler");
      return;
    }
    catch (Exception paramThread)
    {
      for (;;)
      {
        paramThread.printStackTrace();
      }
    }
  }
}
