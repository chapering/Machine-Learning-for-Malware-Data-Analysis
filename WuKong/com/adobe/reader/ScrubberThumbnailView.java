package com.adobe.reader;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ScrubberThumbnailView
  extends LinearLayout
{
  private static final double MAX_HEIGHT = 162.0D;
  private static final double MAX_WIDTH = 152.0D;
  
  public ScrubberThumbnailView(Context paramContext)
  {
    super(paramContext);
  }
  
  public ScrubberThumbnailView(Context paramContext, AttributeSet paramAttributeSet)
  {
    super(paramContext, paramAttributeSet);
  }
  
  private void drawBorder(Canvas paramCanvas, Paint paramPaint, int paramInt1, int paramInt2, int paramInt3, int paramInt4)
  {
    paramCanvas.drawLine(paramInt1, paramInt2, paramInt3, paramInt2, paramPaint);
    paramCanvas.drawLine(paramInt3, paramInt2, paramInt3, paramInt4, paramPaint);
    paramCanvas.drawLine(paramInt3, paramInt4, paramInt1, paramInt4, paramPaint);
    paramCanvas.drawLine(paramInt1, paramInt4, paramInt1, paramInt2, paramPaint);
  }
  
  protected void onDraw(Canvas paramCanvas)
  {
    super.onDraw(paramCanvas);
    Paint localPaint = new Paint();
    localPaint.setColor(-16777216);
    drawBorder(paramCanvas, localPaint, 0, 0, getWidth() - 1, getHeight() - 1);
    View localView = findViewById(2131492908);
    drawBorder(paramCanvas, localPaint, localView.getLeft() - 1, localView.getTop() - 1, localView.getRight(), localView.getBottom());
  }
  
  public void setPage(PageView paramPageView, int paramInt)
  {
    ARDocViewManager localARDocViewManager = paramPageView.getDocViewManager();
    double d3;
    double d1;
    double d4;
    double d2;
    if (localARDocViewManager != null)
    {
      d3 = Math.max(Math.max(paramPageView.getScreenWidth(), paramPageView.getScreenHeight()) * 0.2D, 152.0D);
      d1 = Math.max(d3, 162.0D);
      d4 = localARDocViewManager.getZoomLevel();
      d2 = localARDocViewManager.getPageWidth(paramInt) / d4;
      d4 = localARDocViewManager.getPageHeight(paramInt) / d4;
      if (d4 <= d1) {
        break label217;
      }
      d2 = d1 / d4 * d2;
    }
    for (;;)
    {
      if (d2 > d3)
      {
        d4 = d3 / d2;
        d2 = d3;
        d1 *= d4;
      }
      for (;;)
      {
        paramPageView = (ImageView)findViewById(2131492908);
        ViewGroup.LayoutParams localLayoutParams = paramPageView.getLayoutParams();
        localLayoutParams.width = ((int)Math.round(d2));
        localLayoutParams.height = ((int)Math.round(d1));
        paramPageView.setLayoutParams(localLayoutParams);
        paramPageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        localARDocViewManager.getPlatformThumbnailManager().drawThumbnail(paramInt, paramPageView);
        ((TextView)findViewById(2131492909)).setText(String.format(getResources().getString(2131361939), new Object[] { Integer.valueOf(paramInt + 1) }));
        return;
      }
      label217:
      d1 = d4;
    }
  }
}
