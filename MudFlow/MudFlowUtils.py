__author__ = 'Vince'
import os
import logging
import json

logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger('sys.stdout')

with open('SusiAPISrcDict.json', 'r') as f0:
    SusiApiSrcMap = json.load(f0)
with open('SusiAPISinkDict.json', 'r') as f1:
    SusiApiSinkMap = json.load(f1)

for line in open('MudFlowConfig.txt', 'rU').readlines():
    if line.startswith('Timeout'):
        timeout = line.split(' ')[2][:-1]
    elif line.startswith('MaxRam'):
        ram = line.split(' ')[2][:-1]
    elif line.startswith('Platformpath'):
        platform = line.split(' ')[2][:-1]
    elif line.startswith('NumFlowProcesses'):
        NumFlowProcesses = int(line.split(' ')[2])


def createdir(dir):
    if not os.path.exists(dir):
        os.makedirs(dir)
    os.system('chmod -R 777 '+dir)


def walk(dir, extend):
    fileset = set()
    for root, dirs, files in os.walk(dir):
        for file in files:
            if file.endswith(extend):
                fileset.add(os.path.join(root,file))
            else:
                logger.debug(file+' is not a valid '+extend+' file')
    return fileset